import{c as D,t as L,m as A,w as E,I as K}from"./index-ddc2bfca.js";import{B as M}from"./index-b5a9ee24.js";import{C as Q}from"./index-be667d0b.js";import{_ as W}from"./index-4f697cc1.js";import"./index-c446ce8d.js";import{F as j}from"./index-f62330f2.js";import{_ as z}from"./CpNavBar-1aee6368.js";/* empty css              *//* empty css              */import{l as G,a as H,s as J}from"./user-0d9278d7.js";import{u as X,a as Y,b as Z}from"./index-a7e87634.js";import{F as ee}from"./index-3181e814.js";import{L as $,N as n,u as i,O as oe,o as V,P as te,Q as s,R as k,K as e,A as y,S as g,T as m,c as C,U as se,V as ae,W as ne,_ as re}from"./_plugin-vue_export-helper-f3904dc0.js";import{s as le}from"./request-24c768a8.js";import"./use-route-5b103eac.js";import"./index-e78eca4d.js";import"./use-id-bbaed4f6.js";import"./use-placeholder-79bf5db6.js";import"./on-popup-reopen-04aacf57.js";import"./runtime-dom.esm-bundler-2ec6e87b.js";import"./interceptor-8f4f549c.js";const[ie,de]=D("divider"),ue={dashed:Boolean,hairline:L,contentPosition:A("center")};var me=$({name:ie,props:ue,setup(r,{slots:p}){return()=>{var h;return n("div",{role:"separator",class:de({dashed:r.dashed,hairline:r.hairline,[`content-${r.contentPosition}`]:!!p.default})},[(h=p.default)==null?void 0:h.call(p)])}}});const pe=E(me);const ce="/assets/qq-7e9221ab.svg",_e=[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],ve=[{required:!0,message:"请填写密码"},{pattern:/^\w{8,24}$/,message:"密码格式不正确"}],fe=[{required:!0,message:"请填写密码"},{pattern:/^\d{6}$/,message:"验证码格式不正确"}],w=r=>(ae("data-v-78dccf09"),r=r(),ne(),r),ge={class:"prompt"},he={class:"promptLeft"},ye=w(()=>s("a",{href:""},"用户协议",-1)),we=w(()=>s("a",{href:""},"隐私条款",-1)),xe={style:{margin:"60px 0 30px 0"}},be=w(()=>s("a",{href:"",style:{margin:"16px"}},"忘记密码？",-1)),Ve={class:"login-other"},ke=w(()=>s("div",{class:"icon"},[s("img",{src:ce,alt:""})],-1)),Ie=$({__name:"index",setup(r){const p=Y(),h=Z(),B=X();let c=i(!1);const _=i(""),x=i("");let l=i(!0);const P=async()=>{if(!c.value)return le("请同意用户协议");const u=a.value?await G(_.value,v.value):await H(_.value,x.value);B.setUser(u.data),h.push(p.query.returnUrl||"/user")};let a=i(!1),v=i("");const d=i(0);let f;const I=i(null),R=async()=>{var u;d.value>0||(await((u=I.value)==null?void 0:u.validate("mobile")),await J(_.value,"login"),d.value=60,f&&clearInterval(f),f=setInterval(()=>{d.value--,d.value<=0&&clearInterval(f)},1e3))};return oe(()=>{clearInterval(f)}),(u,o)=>{const S=z,U=K,b=j,q=W,N=Q,F=M,T=ee,O=pe;return V(),te(se,null,[n(S,{rightText:"注册",onOnClickRight:o[0]||(o[0]=t=>u.$router.push("/register"))}),s("div",ge,[s("div",he,k(e(a)?"短信验证码登录":"密码登录"),1),s("a",{class:"promptRight",onClick:o[1]||(o[1]=t=>y(a)?a.value=!e(a):a=!e(a))},[g(k(e(a)?"密码登录":"短信验证码登录")+" ",1),n(U,{name:"arrow"})])]),n(T,{onSubmit:P,autocomplete:"off",ref_key:"form",ref:I},{default:m(()=>[n(b,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=t=>_.value=t),type:"text",name:"mobile",placeholder:"请填写用户名",rules:e(_e)},null,8,["modelValue","rules"]),e(a)?(V(),C(b,{key:1,modelValue:e(v),"onUpdate:modelValue":o[5]||(o[5]=t=>y(v)?v.value=t:v=t),type:`${e(l)?"password":"text"}`,name:"password",placeholder:"请填写验证码",rules:e(fe)},{button:m(()=>[s("div",{class:"btn-send",onClick:R},k(d.value>0?`${d.value}秒后发送验证码`:"发送短信"),1)]),_:1},8,["modelValue","type","rules"])):(V(),C(b,{key:0,modelValue:x.value,"onUpdate:modelValue":o[4]||(o[4]=t=>x.value=t),type:`${e(l)?"password":"text"}`,name:"password",placeholder:"请填写密码",rules:e(ve)},{button:m(()=>[n(q,{name:`login-eye-${e(l)?"on":"off"}`,onClick:o[3]||(o[3]=t=>y(l)?l.value=!e(l):l=!e(l))},null,8,["name"])]),_:1},8,["modelValue","type","rules"])),n(N,{modelValue:e(c),"onUpdate:modelValue":o[6]||(o[6]=t=>y(c)?c.value=t:c=t)},{default:m(()=>[g("我已同意 "),ye,g(" 及 "),we]),_:1},8,["modelValue"]),s("div",xe,[n(F,{round:"",block:"",type:"primary","native-type":"submit"},{default:m(()=>[g(" 登录 ")]),_:1})]),be]),_:1},512),s("div",Ve,[n(O,null,{default:m(()=>[g("第三方登录")]),_:1}),ke])],64)}}});const ze=re(Ie,[["__scopeId","data-v-78dccf09"]]);export{ze as default};
